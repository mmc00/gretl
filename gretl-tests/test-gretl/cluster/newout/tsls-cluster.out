gretl version 2016b-git
Copyright Ramu Ramanathan, Allin Cottrell and Riccardo "Jack" Lucchetti
This is free software with ABSOLUTELY NO WARRANTY
Current session: 2016-04-21 00:54
? run tsls-cluster.inp
 /home/cottrell/stats/test-gretl/cluster/tsls-cluster.inp
? function matrix stata_reorder (matrix se)
? nulldata 256
periodicity: 1, maxobs: 256
observations range: 1 to 256
? set seed 897561321
Pseudo-random number generator seeded with 897561321
? series y = normal()
Generated series y (ID 2)
? series cx = uniform()
Generated series cx (ID 3)
? cx = (cx > 0.75)? 3 : (cx > 0.5)? 2 : (cx > 0.25)? 1 : 0
Replaced series cx (ID 3)
? nendo = 2
Generated scalar nendo = 2
? nexo = 2
Generated scalar nexo = 2
? ninst = 3
Generated scalar ninst = 3
? list lY = null
Generated list lY
? loop i=1..nendo -q
> series Y$i = normal()
> lY += Y$i
> endloop
? list lX = const
Generated list lX
? loop i=1..nexo -q
> series X$i = normal()
> lX += X$i
> endloop
? list lZ = null
Generated list lZ
? loop i=1..ninst -q
> series Z$i = normal()
> lZ += Z$i
> endloop
? tsls y lY lX ; lX lZ --cluster=cx

Model 1: TSLS, using observations 1-256
Dependent variable: y
Instrumented: Y1 Y2 
Instruments: const X1 X2 Z1 Z2 Z3 
Standard errors clustered by 4 values of cx

             coefficient   std. error      z      p-value
  -------------------------------------------------------
  const       0.152373     0.148425      1.027    0.3046 
  Y1         -0.399867     0.857374     -0.4664   0.6409 
  Y2         -0.353522     0.598527     -0.5907   0.5548 
  X1         -0.0416443    0.0716913    -0.5809   0.5613 
  X2          0.0631541    0.0657942     0.9599   0.3371 

Mean dependent var   0.124191   S.D. dependent var   0.937321
Sum squared resid    347.6911   S.E. of regression   1.176955
R-squared            0.011073   Adjusted R-squared  -0.004687
F(4, 251)            1.11e+15   P-value(F)           0.000000

Hausman test -
  Null hypothesis: OLS estimates are consistent
  Asymptotic test statistic: Chi-square(2) = 0.92275
  with p-value = 0.630416

Sargan over-identification test -
  Null hypothesis: all instruments are valid
  Test statistic: LM = 0.643585
  with p-value = P(Chi-square(1) > 0.643585) = 0.422416

Weak instrument test - 
  Cragg-Donald minimum eigenvalue = 0.466734
  Critical values for TSLS bias relative to OLS:

     bias       5%      10%      20%      30%
    value     0.00     0.00     0.00     0.00

  Relative bias is probably less than 5%

  Critical values for desired TSLS maximal size, when running
  tests at a nominal 5% significance level:

     size      10%      15%      20%      25%
    value    13.43     8.18     6.40     5.45

  Maximal size may exceed 25%

? matrix se = $stderr
Generated matrix se
? foreign language=stata --send-data
?   ivreg y x1 x2 (y1 y2 = z1 z2 z3), cluster(cx)
?   matrix vcv = e(V)
?   gretl_export vcv "vcv.mat"
? end foreign
Failed to execute child process "stata" (No such file or directory)

